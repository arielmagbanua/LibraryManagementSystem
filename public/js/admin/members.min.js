$(document).ready(function(){$("#birth_date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,defaultViewDate:{year:1998,month:0,day:1}});var e=$("#baseURL").html(),a=e+"/serverSide/membersList";$("#members_datatable").DataTable({processing:!0,serverSide:!0,dom:'<"row" <"col-md-6" <"row" <"col-md-4" l><"col-md-8 add_member" >>><"col-md-6" f>>rt<"row" <"col-md-6" i><"col-md-6" p>>',order:[[0,"asc"]],ajax:{url:a,type:"get",error:function(){}},columns:[{data:"id"},{data:"first_name"},{data:"middle_name"},{data:"last_name"},{data:"address"},{data:"email"},{data:"birth_date"},{data:"actions",orderable:!1}]}),$("div.add_member").html('<button class="btn btn-success" data-action="add_member" data-toggle="modal" data-target="#member_modal_form">Add Member</button>'),$("#member_modal_form").on("show.bs.modal",function(a){if("bs.modal"===a.namespace){var t=$(a.relatedTarget),d=t.data("action"),l=$("#member_form");if("edit_member"==d){var m=t.data("id");$(".modal-title").html("Edit Member"),$(".save-label").html("Save Changes"),l.attr("action",e+"/user/"+m),l.attr("method","PATCH"),l.data("success","Member updated successfully!"),$(".password-field").hide(),$("#email").prop("readonly",!0);var r="#member-"+m+"-",s=$(r+"first_name").html(),o=$(r+"middle_name").html(),i=$(r+"last_name").html(),n=$(r+"address").html(),b=$(r+"email").html(),c=$(r+"birth_date").html(),_=$("#member_modal_form");_.find("#first_name").val(s),_.find("#middle_name").val(o),_.find("#last_name").val(i),_.find("#address").val(n),_.find("#email").val(b),_.find("#birth_date").val(c)}else $(".password-field").show(),$("#member_modal_form :input").val(""),$("#email").removeAttr("readonly"),$(".modal-title").html("Add Member"),$(".save-label").html("Save"),l.attr("action",e+"/user"),l.attr("method","POST"),l.data("success","Member added successfully!")}}),$("#delete_modal").on("show.bs.modal",function(e){var a=$(e.relatedTarget),t=a.data("action");if("delete_member"==t){$(".modal-title").html("Delete Member");var d=a.data("id");$("#id_to_delete").val(d);var l=$("#delete_button"),m=l.find("span.delete-label");m.html("Yes Delete"),m.removeClass("fa fa-spin fa-spinner"),l.removeAttr("disabled"),l.show(),$("#delete_cancel_button").html("Cancel"),$("#delete_modal_message").html("Are you sure you want to delete this member?")}}),$("#delete_button").click(function(){var a=$("#id_to_delete").val(),t=$(this),d=$("#delete_cancel_button"),l=t.find("span.delete-label");l.html(""),l.addClass("fa fa-spin fa-spinner"),t.prop("disabled",!0),d.prop("disabled",!0);var m=e+"/user/"+a;$.ajax({type:"DELETE",url:m,success:function(){var e=$("#members_datatable").DataTable();e.ajax.reload(function(){$("#delete_modal_message").html("The member was successfully deleted!"),t.hide(),d.html("Close"),d.removeAttr("disabled")},!1)}})})});