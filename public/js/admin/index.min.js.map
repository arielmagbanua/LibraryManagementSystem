{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.min.js","sourcesContent":["$(document).ready(function()\r\n{\r\n    $('.search-select').select2({\r\n        theme: 'bootstrap',\r\n        dropdownParent: $(\"#search_parameter_container\")\r\n    });\r\n\r\n    var baseURL = $('#baseURL').html();\r\n    var booksListURL = baseURL+'/serverSide/borrowStatistics';\r\n\r\n    $('#books_loans_datatable').DataTable({\r\n        'processing': true,\r\n        'serverSide': true,\r\n        'order': [[ 0, \"desc\" ]],\r\n        'ajax': {\r\n            url: booksListURL,\r\n            type: 'get',\r\n            error: function() {},\r\n            data:function(d)\r\n            {\r\n                //get all the search parameters\r\n                d.title = $('#title').val();\r\n                d.author_id = $('#author_id').val();\r\n                d.isbn = $('#isbn').val();\r\n                d.status = $('#status').val();\r\n                d.user_id = $('#user_id').val();\r\n            }\r\n        },\r\n        'columns':[\r\n            {'data':'title'},\r\n            {'data':'author_name'},\r\n            {'data':'isbn'},\r\n            {'data':'status'},\r\n            {'data':'borrow_start_date'},\r\n            {'data':'date_returned'},\r\n            {'data':'borrower'},\r\n            {'data':'fine'}\r\n        ],\r\n        'drawCallback':function(settings)\r\n        {\r\n            var api = this.api();\r\n            var rowCount = api.data().count();\r\n\r\n            if(rowCount>0)\r\n            {\r\n                $('#download_borrow_report').show();\r\n            }\r\n\r\n            else\r\n            {\r\n                $('#download_borrow_report').hide();\r\n            }\r\n        },\r\n        'footerCallback':function(row, data, start, end, display)\r\n        {\r\n            var api = this.api();\r\n\r\n            // Remove the formatting to get integer data for summation\r\n            var intVal = function (i) {\r\n                return typeof i === 'string' ?\r\n                i.replace(/[\\$,]/g, '')*1 :\r\n                    typeof i === 'number' ?\r\n                        i : 0;\r\n            };\r\n\r\n            // Total over all pages\r\n            var total = api\r\n                .column(7)\r\n                .data()\r\n                .reduce(function (a, b) {\r\n                    return intVal(a) + intVal(b);\r\n                },0);\r\n\r\n            //Total over this page\r\n            var pageTotal = api\r\n                .column(7, { page: 'current'} )\r\n                .data()\r\n                .reduce(function (a, b) {\r\n                    return intVal(a) + intVal(b);\r\n                },0);\r\n\r\n            // Update footer\r\n            $(api.column(7).footer()).html(pageTotal +' ( '+ total +' total)');\r\n        }\r\n    });\r\n\r\n    $('#generate_report').click(function()\r\n    {\r\n        var reportsDataTable = $('#books_loans_datatable').DataTable();\r\n\r\n        //remove the currently selected ordering\r\n        //reportsDataTable.order([]);\r\n        reportsDataTable.ajax.reload();\r\n    });\r\n});\r\n"]}