$(document).ready(function(){$("#birth_date").datepicker({format:"yyyy-mm-dd",clearBtn:!0,autoclose:!0,defaultViewDate:{year:1998,month:0,day:1}});var a=$("#baseURL").html(),t=a+"/serverSide/authorsList";$("#authors_datatable").DataTable({processing:!0,serverSide:!0,dom:'<"row" <"col-md-6" <"row" <"col-md-4" l><"col-md-8 add_author" >>><"col-md-6" f>>rt<"row" <"col-md-6" i><"col-md-6" p>>',order:[[0,"asc"]],ajax:{url:t,type:"get",error:function(){}},columns:[{data:"id"},{data:"first_name"},{data:"middle_name"},{data:"last_name"},{data:"description"},{data:"birth_date"},{data:"actions",orderable:!1}]}),$("div.add_author").html('<button class="btn btn-success" data-action="add_author" data-toggle="modal" data-target="#author_modal_form">Add Author</button>'),$("#author_modal_form").on("show.bs.modal",function(t){if("bs.modal"===t.namespace){var e=$(t.relatedTarget),d=e.data("action"),l=$("#author_form");if("edit_author"==d){var o=e.data("id");$(".modal-title").html("Edit Author"),$(".save-label").html("Save Changes"),l.attr("action",a+"/author/"+o),l.attr("method","PATCH"),l.data("success","Author updated successfully!");var r="#author-"+o+"-",s=$(r+"first_name").html(),i=$(r+"middle_name").html(),m=$(r+"last_name").html(),n=$(r+"description").html(),u=$(r+"birth_date").html(),h=$("#author_modal_form");h.find("#first_name").val(s),h.find("#middle_name").val(i),h.find("#last_name").val(m),h.find("#description").val(n),h.find("#birth_date").val(u)}else $("#author_modal_form :input").val(""),$(".modal-title").html("Add Author"),$(".save-label").html("Save"),l.attr("action",a+"/author"),l.attr("method","POST"),l.data("success","Author added successfully!")}}),$("#delete_modal").on("show.bs.modal",function(a){var t=$(a.relatedTarget),e=t.data("action");if("delete_author"==e){$(".modal-title").html("Delete Author");var d=t.data("id");$("#id_to_delete").val(d);var l=$("#delete_button"),o=l.find("span.delete-label");o.html("Yes Delete"),o.removeClass("fa fa-spin fa-spinner"),l.removeAttr("disabled"),l.show(),$("#delete_cancel_button").html("Cancel"),$("#delete_modal_message").html("Are you sure you want to delete this author?")}}),$("#delete_button").click(function(){var t=$("#id_to_delete").val(),e=$(this),d=$("#delete_cancel_button"),l=e.find("span.delete-label");l.html(""),l.addClass("fa fa-spin fa-spinner"),e.prop("disabled",!0),d.prop("disabled",!0);var o=a+"/author/"+t;$.ajax({type:"DELETE",url:o,success:function(){var a=$("#authors_datatable").DataTable();a.ajax.reload(function(){$("#delete_modal_message").html("The book was successfully deleted!"),e.hide(),d.html("Close"),d.removeAttr("disabled")},!1)}})})});