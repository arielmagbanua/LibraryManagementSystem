{"version":3,"sources":["borrowed-books.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"borrowed-books.min.js","sourcesContent":["var baseURL = $('#baseURL').html();\r\nvar booksListURL = baseURL+'/serverSide/borrowedBooksList';\r\n\r\n$('#borrowed_books_datatable').DataTable({\r\n    'processing': true,\r\n    'serverSide': true,\r\n    'order': [[ 4, \"desc\" ]],\r\n    'ajax': {\r\n        url: booksListURL,\r\n        type: 'get',\r\n        error: function() {}\r\n    },\r\n    'columns':[\r\n        {'data':'title'},\r\n        {'data':'author_name'},\r\n        {'data':'isbn'},\r\n        {'data':'borrow_start_date'},\r\n        {'data':'return_date'},\r\n        {'data':'fine'}\r\n    ],\r\n    'footerCallback':function(row, data, start, end, display)\r\n    {\r\n        var api = this.api();\r\n\r\n        // Remove the formatting to get integer data for summation\r\n        var intVal = function (i) {\r\n            return typeof i === 'string' ?\r\n            i.replace(/[\\$,]/g, '')*1 :\r\n                typeof i === 'number' ?\r\n                    i : 0;\r\n        };\r\n\r\n        // Total over all pages\r\n        var total = api\r\n            .column(5)\r\n            .data()\r\n            .reduce(function (a, b) {\r\n                return intVal(a) + intVal(b);\r\n            },0);\r\n\r\n        //Total over this page\r\n        var pageTotal = api\r\n            .column(5, { page: 'current'} )\r\n            .data()\r\n            .reduce(function (a, b) {\r\n                return intVal(a) + intVal(b);\r\n            },0);\r\n\r\n        // Update footer\r\n        $(api.column(5).footer()).html(pageTotal +' ( '+ total +' total)');\r\n\r\n        //set the total to the free-slot in the header\r\n        var freeSlotLink = $('.free-slot-link-1');\r\n        freeSlotLink.text('Your total fine: '+total);\r\n        freeSlotLink.css('color','red');\r\n    }\r\n});\r\n"]}