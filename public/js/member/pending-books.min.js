$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="_token"]').attr("content")}});var e=$("#baseURL").html(),a=e+"/serverSide/pendingBorrowRequest";$("#pending_borrowed_books_datatable").DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],ajax:{url:a,type:"get",error:function(){}},columns:[{data:"title"},{data:"isbn"},{data:"overdue_fine"},{data:"shelf_location"},{data:"borrow_start_date"},{data:"actions",orderable:!1}]}),$("#cancel_request_modal").on("show.bs.modal",function(e){$(".modal-title").html("Cancel Borrow Request");var a=$(e.relatedTarget),t=a.data("action");if("cancel_borrow_request"==t){var o=a.data("id");$("#request_id_to_cancel").val(o);var r=$("#yes_cancel_borrow_request_button"),s=r.find("span.yes-label");s.html("Yes"),s.removeClass("fa fa-spin fa-spinner"),r.removeAttr("disabled"),r.show(),$("#cancel_borrow_request_button").html("No"),$("#cancel_request_modal_message").html("Are you sure you want to cancel this book borrow request?")}}),$("#yes_cancel_borrow_request_button").click(function(){var a=$("#request_id_to_cancel").val(),t=$(this),o=$("#cancel_borrow_request_button"),r=t.find("span.yes-label");r.html(""),r.addClass("fa fa-spin fa-spinner"),t.prop("disabled",!0),o.prop("disabled",!0);var s=e+"/member/book/"+a+"/cancel_borrow_request";$.ajax({type:"post",url:s,success:function(e){var a=$("#pending_borrowed_books_datatable").DataTable();a.ajax.reload(function(){"fail"==e.status?($(".modal-title").html("Ooppps!"),$("#cancel_request_modal_message").html(e.message),o.html("Ok, Understand")):($(".modal-title").html("Cancel Borrow Request"),$("#cancel_request_modal_message").html(e.message),o.html("Close")),t.hide(),o.removeAttr("disabled")},!1)}})})});